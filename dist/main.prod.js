"use strict";var pageType,prevLink,currLink,nextLink,htmlCache={},jsonCache={},idb=new Dexie("quzeiy");function parseQuery(t){for(var e,n,o,i,c=t.substring(1).split("&"),a={},r=0;r<c.length;r++)-1===(e=c[r]).indexOf("=")?a[decodeURIComponent(e).trim()]=!0:(n=e.split("="),o=decodeURIComponent(n[0]).trim(),i=decodeURIComponent(n[1]).trim(),a[o]=i);return a}function getHtml(e,n){e=e.replace("?m=1","").replace("&m=1",""),htmlCache[e]?(console.log("getHtml","Cached",e),"function"==typeof n&&n(htmlCache[e])):(console.log("getHtml","Fetching...",e),fetch(e).then(function(t){return t.text()}).then(function(t){htmlCache[e]=$(t).filter("#main").html(),"function"==typeof n&&n(htmlCache[e])}))}function showHtml(e,n){e=e.replace("?m=1","").replace("&m=1",""),$("#overlay, #loading").show(),getHtml(e,function(t){history.pushState(e,n,e),$("#main").html(t),$("#overlay, #loading").hide()})}function getJson(e,n){jsonCache[e]?(console.log("getJson","Cached",e),"function"==typeof n&&n(jsonCache[e])):(console.log("getJson","Fetching...",e),fetch(e).then(function(t){return t.json()}).then(function(t){jsonCache[e]=t,"function"==typeof n&&n(t)}))}function getItemByLink(t,e){idb.items.where({link:t}).first(e)}function getItemById(e,n,t,o){var i;t?getItemFromServer(e,n,o):(i="tag:blogger.com,1999:blog-2922968119760916210.".concat(e,"-").concat(n),idb.items.get(i).then(function(t){t?"function"==typeof o&&o(t):getItemFromServer(e,n,o)}))}function getItemFromServer(t,e,n){var o="".concat(location.origin,"/feeds/").concat(t,"s/default/").concat(e,"?alt=json");fetch(o).then(function(t){return t.json()}).then(function(t){var e=t.entry;e?saveItem(e,n):"function"==typeof n&&n(null)})}function saveItem(t,e){var n,o={};for(var i in t){"author"==i?o.authors=t.author.map(function(t){return{email:t.email.$t,name:t.name.$t,image:t.gd$image.src}}):"category"==i?o.categories=t.category.map(function(t){return t.term}):"link"==i?(n=t.link.filter(function(t){return"alternate"==t.rel})[0],o.link=n?n.href:null):t[i].$t&&(o[i]=t[i].$t)}idb.items.put(o),"function"==typeof e&&e(o)}function showItem(t){console.log(t)}function activateQuestion(){$(".post-body > .question-container:not([activated])").each(function(t,n){$(n).find(".option").on("click",function(t){var e=t.target;$(n).attr("attempted")||($(n).find(".solution").show(),"1"==$(e).attr("correct")?($(e).addClass("bg-success"),$(n).find(".answer").hide()):$(e).addClass("bg-danger"),$(e).addClass("text-light"),$(n).attr("attempted","true"))}),$(n).attr("activated","true")})}idb.version(1).stores({items:"id,link,title,content,published,updated,*categories,*authors"}),window.onpopstate=function(t){var e=t.state.replace("?m=1","").replace("&m=1","");console.log(t.state,e),$("#main").html(htmlCache[e])},history.pushState(location.href,document.title,location.href);